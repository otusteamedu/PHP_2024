Миниальной и максимальной цены за билет на конкретный сеанс
select
    session_id,
    min(price),
    max(price)
from tickets
where session_id =1 and deleted_at is null
group by session_id;

+----------+----+----+
|session_id|min |max |
+----------+----+----+
|1         |0.13|9.99|
+----------+----+----+

План для числа записей менее 10000 записей
+--------------------------------------------------------------------------------------------------------+
|QUERY PLAN                                                                                              |
+--------------------------------------------------------------------------------------------------------+
|GroupAggregate  (cost=0.42..95.23 rows=1 width=72)                                                      |
|  ->  Index Scan using tickets_session_id_seat_id_unique on tickets  (cost=0.42..95.05 rows=35 width=14)|
|        Index Cond: (session_id = 1)                                                                    |
|        Filter: (deleted_at IS NULL)                                                                    |
+--------------------------------------------------------------------------------------------------------+

План для числа записей для ~10000 записей
+--------------------------------------------------------------------------------------------------------+
|QUERY PLAN                                                                                              |
+--------------------------------------------------------------------------------------------------------+
|GroupAggregate  (cost=0.42..95.23 rows=1 width=72)                                                      |
|  ->  Index Scan using tickets_session_id_seat_id_unique on tickets  (cost=0.42..95.05 rows=35 width=14)|
|        Index Cond: (session_id = 1)                                                                    |
|        Filter: (deleted_at IS NULL)                                                                    |
+--------------------------------------------------------------------------------------------------------+

План для числа записей для ~10000000 записей
+--------------------------------------------------------------------------------------------------------+
|QUERY PLAN                                                                                              |
+--------------------------------------------------------------------------------------------------------+
|GroupAggregate  (cost=0.42..95.23 rows=1 width=72)                                                      |
|  ->  Index Scan using tickets_session_id_seat_id_unique on tickets  (cost=0.42..95.05 rows=35 width=14)|
|        Index Cond: (session_id = 1)                                                                    |
|        Filter: (deleted_at IS NULL)                                                                    |
+--------------------------------------------------------------------------------------------------------+

Оптимизация
Добавить частичный индекс по полям session_id и price для не удаленных биллетов
create index tickets_session_id_price_index
    on tickets (session_id, price)
    where (deleted_at IS NULL);

Время выполнения до оптимизации: 0.289 ms
Время выполнения до оптимизации: 0.190 ms

План запроса
+----------------------------------------------------------------------------------------------------------------------------------------------------+
|QUERY PLAN                                                                                                                                          |
+----------------------------------------------------------------------------------------------------------------------------------------------------+
|GroupAggregate  (cost=0.42..5.22 rows=1 width=72) (actual time=0.128..0.129 rows=1 loops=1)                                                         |
|  ->  Index Only Scan using tickets_session_id_price_index on tickets  (cost=0.42..5.04 rows=35 width=14) (actual time=0.106..0.110 rows=39 loops=1)|
|        Index Cond: (session_id = 1)                                                                                                                |
|        Heap Fetches: 0                                                                                                                             |
+----------------------------------------------------------------------------------------------------------------------------------------------------+
