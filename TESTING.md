# Тестирование страницы оплаты просмотра фильма

### 1. Модульные тесты:
+ Если поле `card_number` пустое или отсутствует, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.
+ Если поле `card_number` не строка, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.
+ Если поле `card_number` имеет длину более 16 символов, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.
+ Если поле `card_holder` пустое или отсутствует, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.
+ Если поле `card_holder` не строка, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.
+ Если поле `card_holder` содержит символы не входящие в шаблон `[A-z- ]`, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.
+ Если поле `card_holder` содержит больше одного пробела, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.
+ Если поле `card_expiration` пустое или отсутствует, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.
+ Если поле `card_expiration` если не строка, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.
+ Если поле `card_expiration` если не длина строки неравна 5 символов, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.
+ Если поле `card_expiration` если не соответствует шаблону `[0-9]{2}/[0-9]{2}`, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.
+ Если поле `card_expiration` если переданное значение меньше текущей даты, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.
+ Если поле `cvv` пустое или отсутствует, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.
+ Если поле `cvv` не строка, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.
+ Если поле `cvv` если длина строки не равна 3, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.
+ Если поле `order_number` пустое или отсутствует, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.
+ Если поле `order_number` не строка, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.
+ Если поле `order_number` имеет длину более 16 символов, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.
+ Если поле `sum` пустое или отсутствует, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.
+ Если поле `sum` не строка, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.
+ Если поле `sum` если меньше нуля, то метод должен возвращать ошибку с http-кодом 400 и с описанием ошибки.

### 2. Интеграционные тесты:
+ Тест связки `back-front`:
  + Если передать не валидное значение в поле `card_number` то данное поле на форме выделяется красной линией и рядом отображается описание ошибки.
  + Если передать не валидное значение в поле `card_holder` то данное поле на форме выделяется красной линией и рядом отображается описание ошибки.
  + Если передать не валидное значение в поле `card_expiration` то данное поле на форме выделяется красной линией и рядом отображается описание ошибки.
  + Если передать не валидное значение в поле `cvv` то данное поле на форме выделяется красной линией и рядом отображается описание ошибки.
  + Если передать не валидное значение в поле `order_number` то данное поле на форме выделяется красной линией и рядом отображается описание ошибки.
  + Если передать не валидное значение в поле `sum` то данное поле на форме выделяется красной линией и рядом отображается описание ошибки.
+ Тест `repository`
  + Передаем в метод репозитория `setOrderIsPaid` верные данные заказа проверяем что метод возвращает `true`.
  + Передаем в метод репозитория `setOrderIsPaid` неверные данные заказа проверяем что метод возвращает `false`.
  + Передаем в метод репозитория `setOrderIsPaid` верные данные заказа проверяем в БД, что данные о заказе присутствуют.
+ Тест `Сервис А`
  + Передаем в сервис верные данные и проверяем что получили ответ со http-кодом 200.
  + Передаем в сервис неверные данные и проверяем что получили ответ со http-кодом 400.

### 3. Системные тесты:
  + Тестирование оплат:
    + Если неверен `cvv` то на фронт возвращается ошибка «Не удалось списать данные с карты, проверьте реквизиты».
    + Если неверен `card_number` то на фронт возвращается ошибка «Не удалось списать данные с карты, проверьте реквизиты».
    + Если неверен `card_holder` то на фронт возвращается ошибка «Не удалось списать данные с карты, проверьте реквизиты».
    + Если данные верны, то на фронт возвращается ошибка «Оплата успешно произведена».

Для удешевления тестирования сервиса оплаты, нужно написать мок для сервиса оплаты, чтобы не обращаться к нему на прямую.