upstream nginx-cluster {
    least_conn;
    server nginx-1:80 weight=1;
    server nginx-2:80 weight=1;
    server nginx-3:80 weight=2;
}

server {
    listen 80;

    server_name  app.local; 

    location / {
        proxy_pass http://nginx-cluster;
        proxy_set_header Host  app.local;
    }
}
