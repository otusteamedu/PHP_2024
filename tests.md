**1\. Модульные тесты**

a. **card_holder**:

-   Если card_holder содержит более одного пробела подряд, то метод возвращает 400 с сообщением об ошибке.
-   Если card_holder содержит символы, кроме латинских букв и дефиса, то метод возвращает 400 с сообщением об ошибке.
-   Если поле card_holder пустое, метод возвращает 400 с сообщением об ошибке.
-   Если card_holder содержит только латинские буквы и дефисы, без лишних пробелов, метод должен вернуть 200 и успешно завершить работу.

b. **card_number**:

-   Если card_number содержит менее или более 16 символов, метод возвращает 400 с сообщением об ошибке.
-   Если card_number содержит символы, отличные от цифр, метод возвращает 400 с сообщением об ошибке.
-   Если card_number пустое, метод возвращает 400 с сообщением об ошибке.
-   Если card_number содержит ровно 16 цифр, метод должен вернуть 200 и выполниться успешно.

c. **card_expiration**:

-   Если card_expiration не соответствует формату мм/гг, метод возвращает 400 с сообщением об ошибке.
-   Если срок действия карты истек (текущий месяц и год позже указанных), метод возвращает 400 с сообщением об ошибке.
-   Если поле card_expiration пустое, метод возвращает 400 с сообщением об ошибке.
-   Если card_expiration имеет правильный формат мм/гг, а дата относится к будущему, метод должен вернуть 200 и успешно завершить работу.

d. **cvv**:

-   Если cvv не содержит ровно 3 цифры, метод возвращает 400 с сообщением об ошибке.
-   Если поле cvv пустое, метод возвращает 400 с сообщением об ошибке.
-   Если cvv содержит ровно 3 цифры, метод должен вернуть 200 и выполниться успешно.

e. **sum**:

-   Если сумма не является строкой в формате, содержащем дробную часть, разделенную запятой (например, 100,50), метод возвращает 400 с сообщением об ошибке.
-   Если поле sum пустое, метод возвращает 400 с сообщением об ошибке.
-   Если сумма указана как допустимая строка в формате с запятой (например, «100,50»), метод должен вернуть 200 и успешно завершить работу.

f. **order_number**:

-   Если order_number содержит более 16 символов, метод возвращает 400 с сообщением об ошибке.
-   Если поле order_number пустое, метод возвращает 400 с сообщением об ошибке.
-   Если order_number содержит 16 или менее символов, метод должен вернуть 200 и продолжить работу успешно.

**2\. Интеграционные тесты**

**a. Проверка связки "фронт-бэк"**

i. **card_holder**:

-   Если card_holder содержит более одного пробела, после получения ответа от бэка на фронте выделяется поле "Владелец карты" красной рамкой.

ii. **card_number**:

-   Если card_number содержит менее 16 цифр, после получения ответа от бэка на фронте выводится сообщение об ошибке, и поле "Номер карты" выделяется красной рамкой.

iii. **card_expiration**:

-   Если срок действия карты истек, после ответа от бэка на фронте выводится сообщение "Срок действия карты истёк", и поле "Дата окончания действия карты" выделяется красной рамкой.

iv. **sum**:

-   Если сумма имеет некорректный формат (например, без дробной части или с точкой вместо запятой), после ответа от бэка на фронте выделяется поле "Сумма" красной рамкой.

**b. Проверка связки "бэк-репозиторий"**

i. **Успешная запись оплаты**:

-   Проверка того, что после успешного списания средств метод setOrderIsPaid записывает корректную информацию о заказе в БД, возвращая true.

ii. **Неверный номер заказа**:

-   Если передан некорректный номер заказа или сумма не совпадает с номером заказа, проверяем, что метод setOrderIsPaid выбрасывает исключение, и бэк возвращает соответствующую ошибку на фронт.

**3\. Системные тесты**

a. **Некорректный cvv**:

-   Если cvv неверен (неправильный формат или неверные данные), то после получения ответа от бэка на фронте выводится сообщение "Не удалось списать данные с карты, проверьте реквизиты".

b. **Успешная оплата**:

-   Если все данные корректны, происходит успешное списание средств через сервис А, и на фронте выводится сообщение "Оплата прошла успешно", при этом заказ фиксируется как оплаченный в базе данных.

c. **Отказ сервиса А**:

-   Если сервис А возвращает код 403 (например, недостаточно средств), то на фронте выводится сообщение "Не удалось списать средства, недостаточно средств на карте", и заказ не фиксируется как оплаченный.

d. **Ошибка при записи в базу данных**:

-   Если после успешного списания средств метод setOrderIsPaid не смог записать данные в БД (например, ошибка соединения с базой данных), то на фронте выводится сообщение "Произошла ошибка при обработке заказа, обратитесь в поддержку". 