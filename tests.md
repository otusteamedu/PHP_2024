## Тестирование

1. **Модульные тесты**

    1. Если отсутствует хотя бы одно обязательное поле, тестируемый метод возвращает 400 с сообщением об ошибке
    2. Тесты методов проверки формата обязательных полей

        1. Card_number
            - если длина не равна 16 символам, тестируемый метод возвращает 400 с сообщением об ошибке
            - если содержит не только цифры, тестируемый метод возвращает 400 с сообщением об ошибке

        2. Card_holder
            - если тип не string, тестируемый метод возвращает 400 с сообщением об ошибке
            - если содержит не только латинские буквы, тестируемый метод возвращает 400 с сообщением об ошибке
            - если содержит более одного пробела, тестируемый метод возвращает 400 с сообщением об ошибке

        3. Card_ expiration
            - если не соответствует формату мм/гг, тестируемый метод возвращает 400 с сообщением об ошибке
            - если дата действия карты меньше текущей, тестируемый метод возвращает 400 с сообщением об ошибке
            - если месяц вне диапозона 1-12, тестируемый метод возвращает 400 с сообщением об ошибке

        4. Cvv
            - если длина не равна 3 символам, тестируемый метод возвращает 400 с сообщением об ошибке
            - если содержит не только цифры, тестируемый метод возвращает 400 с сообщением об ошибке

		5. Order_number
			- если order_number содержит больше 16 символов, тестируемый метод возвращает 400 с сообщением об ошибке

		6. Sum
			- если Sum меньше или равен 0, тестируемый метод возвращает 400 с сообщением об ошибке
			- если Sum содержит что-то кроме цифр и запятой, тестируемый метод возвращает 400 с сообщением об ошибке
			- если Sum сожержит больше одной запятой, тестируемый метод возвращает 400 с сообщением об ошибке

	3. Если все обязательные поля заполнены и валидны, то тестируемый метод возвращает 200

2. **Интеграционные тесты**

    1. **Связка фронт - бэк**
        1. Если Card_number заполнен некорректно или отсутствует, тестируемый метод выделяет поле красным, выводит пользователю соответствующее сообщение
        2. Если Card_holder заполнен некорректно или отсутствует, тестируемый метод выделяет поле красным, выводит пользователю соответствующее сообщение
        3. Если Card_expiration заполнен некорректно или отсутствует, тестируемый метод выделяет поле красным, выводит пользователю соответствующее сообщение
        4. Если Cvv заполнен некорректно или отсутствует, тестируемый метод выделяет поле красным, выводит пользователю соответствующее сообщение
      
    2. **Связка бэк - сервис А**
        1. Если сервис A возвращает 403, то бэк передает ошибку 400 фронту с сообщением ошибки
        2. Если сервис A возвращает 200, то бэк передает код 200 фронту с сообщением об успешности
      
    3. **Связка бэк-репозиторий**
        1. Если метод setOrderIsPaid выбрасывает исключение, то бэк возвращает ошибку 500 с сообщением ошибки
        2. Если метод setOrderIsPaid возвращает true, то бэк успешно завершает процесс, отправляя ответ на фронт с кодом 200 и сообщением успешности

3. **Системные тесты**

    1. Успешное списание средств с карты (200 от сервиса A, верные данные), то на фронте выводится сообщение об успехе, а в базе данных появляется запись о платеже с верными номером заказа и суммой
    2. Если происходит сбой на бэке или в сервисе A (например, ошибка сервера 500), то на фронте выводится сообщение «Внутренняя ошибка, повторите попытку позже», и процесс оплаты не завершается
    3. Проверка неудачной попытки списания (например, обязательные поля не прошли проверку или блокировка со стороны сервиса A), то на фронте выводится ошибка с подходящим для конкретного случая текстом, а соответствующие поле, которое вызвало ошибку, подсвечивается красным


