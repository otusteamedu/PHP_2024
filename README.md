# Постановка задачи

Вам нужно разработать систему аналитики для производителя пассажирских самолётов. Эта система будет хранить события, возникающие во время полёта. Каждое из событий характеризуется:

- важностью (целое число от 1 до 50000)
- источником (у события гарантированно будет от 1 до 3 источников, см. список ниже)
- служебной информацией (строка в формате JSON размером не более 1Kb; при необходимости в этот JSON можно добавить дополнительные данные)

<u>Возможные источники событий (список фиксированный и не будет меняться никогда):</u>

- планер
- силовая установка
- шасси
- тормозная система
- бортовое оборудование

<u>Примеры событий:</u>

```php
<?php

$event1 = [
    'priority' => 10000,
    'source' => ['планер'],
    'payload' => '{id:141}',
];

$event2 = [
    'priority' => 400,
    'source' => ['силовая установка', 'планер'],
    'payload' => '{id:1810,severity:"Bug"}',
];

$event3 = [
    'priority' => 1500,
    'source' => ['силовая установка', 'планер', 'шасси'],
    'payload' => '{id:555}',
];

?>
```

Аналитики хотят получать выборки событий, отсортированные по важности в обратном порядке (сначала самые важные). Их при этом интересуют события, которые одновременно относятся к одному или нескольким источникам (не более 3). Таким образом, результаты запросов должны выглядеть примерно так:

- запрос "планер" вернёт $event1, $event3, $event2
- запрос "силовая установка" вернёт $event3, $event2
- запрос "силовая установка + планер" вернёт $event3, $event2
- запрос "силовая установка + планер + шасси" вернёт $event3
- запрос "силовая установка + бортовое оборудование" не вернёт ничего

**Ограничения реализации**

- в качестве хранилища данных должен использоваться Redis без дополнительных модулей
- вы можете использовать только ОДИН ключ Redis (например, airplane:events)
- вы можете использовать только ОДНУ команду Redis для получения результата аналитического запроса (без pipelines, транзакций, Lua и т.д.)

Другими словами, если у вас есть запрос "силовая установка + планер", вы можете отправить в Redis только ОДНУ команду, которая должна обратиться к ОДНОМУ ключу и вернуть соответствующие события, отсортированные по важности, вместе с их служебной информацией.
