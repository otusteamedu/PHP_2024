version: '3.8'

services:
  nginx:
    build:
      context: ./docker/nginx
    volumes:
      - ./public:/var/www/html
    ports:
      - "${APP_PORT}:80"
    depends_on:
      - php
#      - redis
#      - memcached
    networks:
      - backend

  php:
    build:
      context: ./docker/php
    volumes:
      - ./public:/var/www/html
#    environment:
#      REDIS_HOST: ${REDIS_HOST}
#      REDIS_PORT: ${REDIS_PORT}
#    depends_on:
#      - redis
#      - memcached
    networks:
      - backend

#  redis:
#    image: redis:latest
#    ports:
#      - "${REDIS_PORT}:6379"
#    environment:
#      REDIS_PASSWORD: ${REDIS_PASSWORD}
#    networks:
#      - backend
#    volumes:
#      - redis:/data
#
#  memcached:
#    image: memcached:latest
#    ports:
#      - "${MEMCACHED_PORT}:11211"
#    networks:
#      - backend

networks:
  backend:
    driver: bridge

#volumes:
#  redis:
#    driver: local
