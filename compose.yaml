services:
  client:
    build:
      context: ./docker/php
    depends_on:
      - server
    volumes:
      - ./:/var/www/html
      - socket:/var/run
    entrypoint: ['php', 'index.php', 'client']
    stdin_open: true

  server:
    build:
      context: ./docker/php
    volumes:
      - ./:/var/www/html
      - socket:/var/run
    entrypoint: ['php', 'index.php', 'server']

volumes:
  socket:
