# Unit-тестирование

1) Модульные тесты:
   - Если *card_number* не передан - возвращаем 400 с сообщением об ошибке;
   - Если *card_number* содержит число символов отличное от 16 цифр - возвращаем 400 с сообщением об ошибке;
   - Если *card_number* содержит символы кроме цифр (пробелы, спецсимволы, буквы) - возвращаем 400 с сообщением об ошибке;
   - Если *card_holder* не передан - возвращаем 400 с сообщением об ошибке;
   - Если *card_holder* содержит цифры или не латинские символы - возвращаем 400 с сообщением об ошибке;
   - Если *card_holder* содержит более одного пробела - возвращаем 400 с сообщением об ошибке;
   - Если *card_expiration* не передан - возвращаем 400 с сообщением об ошибке;
   - Если *card_expiration* передан в некорректном формате (формат не соответствует паттерну ^dd\/dd$) - возвращаем 400 с сообщением об ошибке;
   - Если *card_expiration* содержит месяц выходящий за пределы диапазона от 1 до 12 - возвращаем 400 с сообщением об ошибке;
   - Если *cvv* не передан - возвращаем 400 с сообщением об ошибке;
   - Если *cvv* содержит число символов отличное от 3-х - возвращаем 400 с сообщением об ошибке;
   - Если *cvv* содержит не числовые символы - возвращаем 400 с сообщением об ошибке;
   - Если *order_number* не передан - возвращаем 400 с сообщением об ошибке;
   - Если *order_number* содержит более 16 символов - возвращаем 400 с сообщением об ошибке;
   - Если *sum* не передан - возвращаем 400 с сообщением об ошибке;
   - Если *sum* не соответствует форматы (паттерн ^d+\,d{2}$) - возвращаем 400 с сообщением об ошибке;

2) Интеграционные
   - Связка "фронт-бек":
     - Если *card_number* не передан - после получения ответа от бека, на фронте выводим ошибку и выделяем поле "Номер карты" красной рамкой;
     - Если *card_number* содержит число символов отличное от 16 цифр - после получения ответа от бека, на фронте выводим ошибку и выделяем поле "Номер карты" красной рамкой;
     - Если *card_number* содержит символы кроме цифр (пробелы, спецсимволы, буквы) - после получения ответа от бека, на фронте выводим ошибку и выделяем поле "Номер карты" красной рамкой;
     - Если *card_holder* не передан - после получения ответа от бека, на фронте выводим ошибку и выделяем поле "Владелец карты" красной рамкой;
     - Если *card_holder* содержит цифры или не латинские символы - после получения ответа от бека, на фронте выводим ошибку и выделяем поле "Владелец карты" красной рамкой;
     - Если *card_holder* содержит более одного пробела - после получения ответа от бека, на фронте выводим ошибку и выделяем поле "Владелец карты" красной рамкой;
     - Если *card_expiration* не передан - после получения ответа от бека, на фронте выводим ошибку и выделяем поле "Действует до" красной рамкой;
     - Если *card_expiration* передан в некорректном формате (формат не соответствует паттерну ^dd\/dd$) - после получения ответа от бека, на фронте выводим ошибку и выделяем поле "Действует до" красной рамкой;
     - Если *card_expiration* содержит месяц выходящий за пределы диапазона от 1 до 12 - после получения ответа от бека, на фронте выводим ошибку и выделяем поле "Действует до" красной рамкой;
     - Если *cvv* не передан - после получения ответа от бека, на фронте выводим ошибку и выделяем поле "CVV" красной рамкой;
     - Если *cvv* содержит число символов отличное от 3-х - после получения ответа от бека, на фронте выводим ошибку и выделяем поле "CVV" красной рамкой;
     - Если *cvv* содержит не числовые символы - после получения ответа от бека, на фронте выводим ошибку и выделяем поле "CVV" красной рамкой;
     - Если *order_number* не передан - после получения ответа от бека, на фронте выводим ошибку и выделяем поле "Номер заказа" красной рамкой;
     - Если *order_number* содержит более 16 символов - после получения ответа от бека, на фронте выводим ошибку и выделяем поле "Номер заказа" красной рамкой;
     - Если *sum* не передан - после получения ответа от бека, на фронте выводим ошибку и выделяем поле "Сумма заказа" красной рамкой;
     - Если *sum* не соответствует форматы (паттерн ^d+\,d{2}$) - после получения ответа от бека, на фронте выводим ошибку и выделяем поле "Сумма заказа" красной рамкой.
     - Если получили ошибку от сервиса A - передаем на фронт сообщение "Не удалось списать данные с карты, проверьте реквизиты", код ошибки 400;
     - Если при записи в БД получена ошибка - передаем на фронт сообщение "Что-то пошло не так, попробуйте позднее", код ошибки 400;
   - Связка "бек-сервис А":
     - Если получили ошибку от сервиса A - выбрасываем своё исключение;
     - Если не получили ошибки от сервиса А - никаких исключений не выбрасываем.
   - Связка "бек-репозиторий":
     - Если запись прошла успешно - метод setOrderIsPaid вернул true, в БД должна появиться запись с суммой и номером заказа;
     - Если при записи получена ошибка - метод setOrderIsPaid выбросил исключение, бек перехватил и выбросил своё исключение.

3) Системные:
    - авам
