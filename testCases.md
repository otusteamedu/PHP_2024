Предлагается описать кейсы тестирования данной задачи для трёх уровней:
модульного, интеграционного и системного. Считаем, что взаимодействуют
4 «модуля»: бэк, фронт, репозиторий и сервис A.
Кейсы тестирования предлагается описывать примерно так:

1. Модульные тесты:

a. Бэк. Тесты на некорректные данные. 
Тестируемые методы возвращают HTTP-код 400 с сообщением об ошибке, если:
 - card_number содержит НЕ только цифры OR только цифры в количестве НЕ равном 16;
 - card_holder содержит более одного пробела OR количество символов менее 3;
 - card_expiration содержит не валидный месяц (напр, 32) OR не валидный год, т.е. который раньше чем текущий OR год, который на более чем 20 лет позднее текущего;
 - cvv содержит НЕ только цифры OR количество символов не равно 3;
 - order_number содержит более 16 символов OR символы НЕ латинские OR содержит пробелы;
 - sum содержит НЕ только цифры и 1 запятую;

Добавлено:
b. Бэк. Тесты на корректные данные.
Тестируемые методы возвращают HTTP-код 200, если:
- card_number содержит только цифры в количестве равном 16;
- card_holder содержит 1 пробел и количество символов не менее 3;
- card_expiration содержит валидный месяц и валидный год, т.е. который позже чем текущий, но не более чем на 20 лет позднее текущего;
- cvv содержит только цифры и количество символов равно 3;
- order_number содержит не более 16 символов, содержащие цифры и латинский алфавит;
- sum содержит только цифры и максимум 1 запятую;

2. Интеграционные тесты:
   a. Проверяем связку «фронт-бэк»:
   - Case 1: если при последовательном заполнении всех необходимых полей бэк возвращает ошибку с HTTP-кодом 400 , поле, на которое указывает ошибка подсвечивается красным цветом; 
   - Case 2: если при НЕ заполнении полей бэк возвращает ошибку с HTTP-кодом 400 , поля, на которые указывает ошибка подсвечиваются красным цветом;
   Добавлено:
   - Case 3: при заполнении полей корректными данными бэк возвращает HTTP-код 200;
   
   b. Проверяем связку «бэк-сервис А»:
   - Case 1: Бэк отправляет корректные данные на сервис А и ожидает в ответ HTTP-код 200. 
   - Case 2: Бэк отправляет данные на сервис А и ожидает в ответ HTTP-код 403 (имитация, что API изменилось и мы об этом не узнали).

   c. Проверяем связку "бэк - репозиторий":
   - Case 1: перед отправкой в сервис А, мы записываем данные в БД. Тестом проверяем корректность записи и что данные записались.
   - Case 2: Полученные из сервиса А данные о сумме заказа и номере заказа проверяем методом setOrderIsPaid(string $orderNumber, float $sum): bool с тем, что записано в базе. Тест проходит, если метод возвращает true .

   
3. Системные тесты:
   a. На фронте выводится сообщение об ошибке «Не удалось списать средства с
   карты, проверьте реквизиты» после получения ответа от бэка, если: 
   - cvv неверен
   - номер карты не верен
   - Имя и Фамилия не соответствуют имени и фамилии владельца карты
   - срок действия карты истек
   - карта не прошла проверку в банке (черный список, санкции и тп)

   b. На фронте выводится сообщение об ошибке "Оплата не доступна, обратитесь в техподдержку", когда Case 2 связки «бэк-сервис А» проходит.

   Добавлено:
   c. На фронте выводится сообщение "Оплата прошла успешно", когда все модули сработали (ввели корректные данные и бэк отдал код 200, данные с бэка успешно записались в БД, платежный сервис вернул код 200 и данные с БД совпали, бэк вернул фронту код 200)

4. Удешевление тестирования: необходимо максимально расписать поведение системы и кейсы тестирования (включая поведение после взаимодействия с модулем платежной системы) до тестирования интеграционных тестов (реальной оплаты), тестировать на минимально возможных суммах.