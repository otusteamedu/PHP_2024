CREATE TABLE hall (id INT AUTO_INCREMENT NOT NULL, title VARCHAR(255) NOT NULL, PRIMARY KEY(id));
CREATE TABLE seat (id INT AUTO_INCREMENT NOT NULL, seat_number int NOT NULL, hall_id INT NOT NULL, PRIMARY KEY(id));
ALTER TABLE seat ADD CONSTRAINT FK_hallSeat FOREIGN KEY (hall_id) REFERENCES hall(id);
CREATE TABLE movie(id INT AUTO_INCREMENT NOT NULL, title VARCHAR(255) NOT NULL, duration_minutes INT NOT NULL, date_start DATE DEFAULT NULL, date_end DATE DEFAULT NULL, PRIMARY KEY(id));
CREATE TABLE session (id INT AUTO_INCREMENT NOT NULL, hall_id INT NOT NULL, movie_id INT NOT NULL, session_time DATETIME NOT NULL, PRIMARY KEY(id));
ALTER TABLE session ADD CONSTRAINT FK_movieSession FOREIGN KEY (movie_id) REFERENCES movie(id);
ALTER TABLE session ADD CONSTRAINT FK_movieHall FOREIGN KEY (hall_id) REFERENCES hall(id);
CREATE TABLE ticket (id INT AUTO_INCREMENT NOT NULL, session_id INT NOT NULL, seat_id INT NOT NULL, price INT NOT NULL, is_blocked TINYINT(1) DEFAULT NULL, is_sold TINYINT(1) DEFAULT NULL, blocked_time DATETIME DEFAULT NULL, sold_time DATETIME DEFAULT NULL, PRIMARY KEY(id));
ALTER TABLE ticket ADD CONSTRAINT FK_sessionTicket FOREIGN KEY (session_id) REFERENCES session(id);
ALTER TABLE ticket ADD CONSTRAINT FK_sessionSeat FOREIGN KEY (seat_id) REFERENCES seat(id);
