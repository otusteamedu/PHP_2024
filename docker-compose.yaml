version: "3"

services:
  php-fpm:
    build:
      context: fpm
      dockerfile: ./Dockerfile
    container_name: php-fpm
    volumes:
      - ./data:/data
    networks:
      - php-fpm-network

  elasticsearch:
    image: docker.elastic.co/elasticsearch/elasticsearch:8.13.2
    container_name: elasticsearch
    environment:
      - node.name=elastic
      - cluster.name=elastic-docker
      - xpack.security.enabled=false
      - xpack.security.enrollment.enabled=false
      - discovery.type=single-node
    networks:
      - php-fpm-network
    ports:
    - 9200:9200
    depends_on:
      - php-fpm

networks:
  php-fpm-network:
    driver: bridge